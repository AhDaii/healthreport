(function(e){function t(t){for(var o,s,l=t[0],i=t[1],c=t[2],u=0,p=[];u<l.length;u++)s=l[u],Object.prototype.hasOwnProperty.call(a,s)&&a[s]&&p.push(a[s][0]),a[s]=0;for(o in i)Object.prototype.hasOwnProperty.call(i,o)&&(e[o]=i[o]);d&&d(t);while(p.length)p.shift()();return n.push.apply(n,c||[]),r()}function r(){for(var e,t=0;t<n.length;t++){for(var r=n[t],o=!0,l=1;l<r.length;l++){var i=r[l];0!==a[i]&&(o=!1)}o&&(n.splice(t--,1),e=s(s.s=r[0]))}return e}var o={},a={app:0},n=[];function s(t){if(o[t])return o[t].exports;var r=o[t]={i:t,l:!1,exports:{}};return e[t].call(r.exports,r,r.exports,s),r.l=!0,r.exports}s.m=e,s.c=o,s.d=function(e,t,r){s.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},s.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},s.t=function(e,t){if(1&t&&(e=s(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(s.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)s.d(r,o,function(t){return e[t]}.bind(null,o));return r},s.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return s.d(t,"a",t),t},s.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},s.p="/";var l=window["webpackJsonp"]=window["webpackJsonp"]||[],i=l.push.bind(l);l.push=t,l=l.slice();for(var c=0;c<l.length;c++)t(l[c]);var d=i;n.push([0,"chunk-vendors"]),r()})({0:function(e,t,r){e.exports=r("56d7")},"199c":function(e,t){},"23be":function(e,t,r){"use strict";var o=r("199c"),a=r.n(o);t["default"]=a.a},"3dfd":function(e,t,r){"use strict";var o=r("5b29"),a=r("23be"),n=r("2877"),s=Object(n["a"])(a["default"],o["a"],o["b"],!1,null,null,null);t["default"]=s.exports},"56d7":function(e,t,r){"use strict";r.r(t);r("e260"),r("e6cf"),r("cca6"),r("a79d");var o=r("2b0e"),a=r("3dfd"),n=r("5c96"),s=r.n(n),l=(r("0fae"),r("a81e")),i=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticStyle:{"max-width":"20%","min-width":"200px",margin:"0 auto"}},[r("el-row",{staticStyle:{"text-align":"center"}},[r("h1",[e._v("登陆")])]),r("el-form",{ref:"loginForm",attrs:{"label-width":"80px",model:e.loginForm,rules:e.rules}},[r("el-form-item",{attrs:{label:"学号",prop:"id"}},[r("el-input",{attrs:{placeholder:"请输入学号或者教师号"},model:{value:e.loginForm.id,callback:function(t){e.$set(e.loginForm,"id",t)},expression:"loginForm.id"}})],1),r("el-form-item",{attrs:{label:"密码",prop:"password"}},[r("el-input",{attrs:{placeholder:"请输入密码(默认为学号后六位)","show-password":""},model:{value:e.loginForm.password,callback:function(t){e.$set(e.loginForm,"password",t)},expression:"loginForm.password"}})],1),r("el-form-item",{attrs:{prop:"userType",label:"用户类型"}},[r("el-radio",{attrs:{label:1},model:{value:e.loginForm.userType,callback:function(t){e.$set(e.loginForm,"userType",t)},expression:"loginForm.userType"}},[e._v("学生")]),r("el-radio",{attrs:{label:2},model:{value:e.loginForm.userType,callback:function(t){e.$set(e.loginForm,"userType",t)},expression:"loginForm.userType"}},[e._v("教师")])],1),r("el-row",{attrs:{type:"flex",justify:"space-around"}},[r("el-button",{staticStyle:{width:"100%"},attrs:{span:6,type:"primary",icon:"el-icon-s-promotion"},on:{click:function(t){return e.loginSubmit("loginForm")}}},[e._v("登陆 ")]),r("el-button",{staticStyle:{width:"100%"},attrs:{span:6,type:"primary",icon:"el-icon-edit",plain:""},on:{click:e.goRegisterPage}},[e._v(" 修改密码 ")])],1)],1)],1)},c=[],d=r("bc3a"),u=r.n(d),p=r("a566"),m={data:function(){return{rules:{id:{required:!0,message:"请输入学号或教师号",trigger:"change"},userType:{required:!0,message:"请选择用户类型",trigger:"blur"}},loginForm:{id:"",password:"",userType:""}}},methods:{goRegisterPage:function(){this.$router.push({path:"/change_pwd"})},loginSubmit:function(e){var t=this;this.$refs[e].validate((function(e){if(e){var r,o=t,a="http://localhost:8080";r=1===t.loginForm.userType?a+"/student":a+"/teacher",u.a.post(r+"/check_pwd/"+o.loginForm.id+"&"+o.loginForm.password).then((function(e){-1===e.data?Object(p["a"])({message:"无此用户",type:"warning"}):1===e.data?(Object(p["a"])({message:"登陆成功",type:"success"}),u.a.get(r+"/get_name/"+o.loginForm.id).then((function(e){o.$store.dispatch("setUserNameAysnc",e.data)})),1===o.loginForm.userType?o.$router.push({path:"/show_record"}):o.$router.push({path:"/teacher_index"}),o.$store.dispatch("setIdAysnc",o.loginForm.id)):0===e.data&&Object(p["a"])({message:"密码错误",type:"warning"})})).catch((function(e){Object(p["a"])({message:"请求错误，原因："+e,type:"error"})}))}}))}}},h=m,g=r("2877"),f=Object(g["a"])(h,i,c,!1,null,null,null),b=f.exports,v=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticStyle:{"max-width":"20%","min-width":"200px",margin:"0 auto"}},[r("el-row",{staticStyle:{"text-align":"center"}},[r("h1",[e._v("修改密码")])]),r("el-form",{ref:"registerForm",attrs:{"label-width":"80px",model:e.registerForm,rules:e.rules}},[r("el-form-item",{attrs:{label:"学号",prop:"id"}},[r("el-input",{attrs:{placeholder:"请输入学号"},model:{value:e.registerForm.id,callback:function(t){e.$set(e.registerForm,"id",t)},expression:"registerForm.id"}})],1),r("el-form-item",{attrs:{label:"密码",prop:"password"}},[r("el-input",{attrs:{placeholder:"请输入密码","show-password":""},model:{value:e.registerForm.password,callback:function(t){e.$set(e.registerForm,"password",t)},expression:"registerForm.password"}})],1),r("el-form-item",{attrs:{label:"确认密码",prop:"confirm_password"}},[r("el-input",{attrs:{placeholder:"再次输入密码","show-password":""},model:{value:e.registerForm.confirm_password,callback:function(t){e.$set(e.registerForm,"confirm_password",t)},expression:"registerForm.confirm_password"}})],1),r("el-row",{attrs:{type:"flex",justify:"space-around"}},[r("el-button",{staticStyle:{width:"100%"},attrs:{span:6,type:"primary"},on:{click:function(t){return e.formSubmit("registerForm")}}},[e._v(" 确认修改 ")]),r("el-button",{staticStyle:{width:"100%"},attrs:{span:6,type:"primary",plain:""},on:{click:e.goLoginPage}},[e._v(" 返回登陆 ")])],1)],1)],1)},w=[],y={data:function(){var e=this,t=function(t,r,o){r!==e.registerForm.password?o(new Error("两次输入的密码不一致")):o()};return{rules:{id:{required:!0,message:"请输入学号",trigger:"blur"},confirm_password:{validator:t,trigger:"blur",required:!0}},registerForm:{id:"",password:"",confirm_password:""}}},methods:{goLoginPage:function(){this.$router.push({path:"/login"})},formSubmit:function(e){var t=this;this.$refs[e].validate((function(e){if(!e)return!1;var r=t,o="http://localhost:8080/student/change_pwd/"+t.registerForm.id+"&"+t.registerForm.password;u.a.post(o).then((function(e){var t=e.data;console.log(e),1===t?(Object(p["a"])({message:"修改密码成功",type:"success"}),r.$router.push({path:"/login"})):Object(p["a"])({message:"学号错误，无此学号",type:"error"})})).catch((function(e){Object(p["a"])({message:"请求错误，原因："+e,type:"error"})}))}))}}},F=y,_=Object(g["a"])(F,v,w,!1,null,null,null),x=_.exports,$=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticStyle:{"max-width":"40%","min-width":"200px",margin:"0 auto"}},[r("el-row",{staticStyle:{"text-align":"center"}},[r("h1",[e._v("健康填报")])]),r("el-row",{staticStyle:{"text-align":"center"}},[r("h2",[e._v("欢迎你，"+e._s(e.$store.state.username)+"同学")])]),r("el-row",[r("el-button",{attrs:{type:"primary"},on:{click:e.addClick}},[e._v(" 新增 ")]),r("el-button",{attrs:{type:"primary",plain:""},on:{click:function(t){e.$router.push({path:"/"}),e.$store.state.id=""}}},[e._v(" 登出 ")])],1),r("el-table",{staticStyle:{"margin-top":"10px"},attrs:{height:"500",data:e.tableData,border:"","header-cell-style":{background:"#eef1f6",color:"#606266"}}},[r("el-table-column",{attrs:{label:"日期",prop:"date",width:"200px",sortable:""}}),r("el-table-column",{attrs:{label:"学号",prop:"sno",width:"100px"}}),r("el-table-column",{attrs:{label:"健康码",prop:"healthqrcode",width:"100px"}}),r("el-table-column",{attrs:{label:"行程码",prop:"tripqrcode",width:"100px"}}),r("el-table-column",{attrs:{label:"地址",prop:"address"}})],1)],1)},k=[],j={data:function(){return{tableData:[]}},mounted:function(){if(""===this.$store.state.id)return Object(p["a"])({message:"请先登录账户",type:"error"}),void this.$router.push({path:"/"});var e="http://localhost:8080/record/show_student_record/"+this.$store.state.id,t=this;u.a.get(e).then((function(e){console.log(e.data),t.tableData=e.data})).catch((function(e){Object(p["a"])({message:"获取健康信息错误，原因："+e,type:"error"})}))},methods:{addClick:function(){var e="http://localhost:8080/student/check/"+this.$store.state.id,t=this;u.a.get(e).then((function(e){!0===e.data?t.$router.push({path:"/add_record"}):Object(p["a"])({message:"今天已经填报过了",type:"warning"})})).catch((function(e){Object(p["a"])({message:e,type:"error"})}))},cancelForm:function(){this.drawer=!1}}},O=j,S=Object(g["a"])(O,$,k,!1,null,null,null),C=S.exports,T=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticStyle:{"max-width":"50%","min-width":"200px",margin:"0 auto"}},[r("el-alert",{attrs:{center:"","show-icon":"",title:"为了您和家人的平安，请您如实填报每日的身体状况信息，以免因为错误的数据没有得到有效的监测而错过了最佳的医治时期。",type:"warning",closable:!1}}),r("el-form",{ref:"recordForm",staticStyle:{"margin-top":"10px"},attrs:{model:e.recordForm,rules:e.rules}},[r("el-row",[r("el-form-item",{attrs:{label:"健康码颜色",prop:"healthQRCode"}},[r("el-select",{attrs:{placeholder:"请选择健康码颜色"},model:{value:e.recordForm.healthQRCode,callback:function(t){e.$set(e.recordForm,"healthQRCode",t)},expression:"recordForm.healthQRCode"}},[r("el-option",{attrs:{label:"绿色",value:"绿色"}}),r("el-option",{attrs:{label:"红色",value:"红色"}}),r("el-option",{attrs:{label:"黄色",value:"黄色"}})],1)],1)],1),r("el-row",[r("el-form-item",{attrs:{label:"行程码颜色",prop:"tripQRCode"}},[r("el-select",{attrs:{placeholder:"请选择行程码颜色"},model:{value:e.recordForm.tripQRCode,callback:function(t){e.$set(e.recordForm,"tripQRCode",t)},expression:"recordForm.tripQRCode"}},[r("el-option",{attrs:{label:"绿色",value:"绿色"}}),r("el-option",{attrs:{label:"红色",value:"红色"}}),r("el-option",{attrs:{label:"黄色",value:"黄色"}})],1)],1)],1),r("el-row",[r("el-form-item",{attrs:{label:"地址","label-width":"82px",prop:"address"}},[r("el-cascader",{attrs:{separator:" ",options:e.regionData,placeholder:"请选择地址"},on:{change:e.changeCasc},model:{value:e.recordForm.address,callback:function(t){e.$set(e.recordForm,"address",t)},expression:"recordForm.address"}})],1)],1),r("el-row",{attrs:{type:"flex",justify:"space_around"}},[r("el-button",{attrs:{span:6,type:"primary"},on:{click:function(t){return e.submit("recordForm")}}},[e._v("提交")]),r("el-button",{attrs:{span:6},on:{click:function(t){return e.$router.push({path:"/show_record"})}}},[e._v("返回")])],1)],1)],1)},R=[],q=r("2e3f"),Q={data:function(){return{rules:{healthQRCode:{required:!0,message:"请选择健康码颜色",trigger:"change"},tripQRCode:{required:!0,message:"请选择行程码颜色",trigger:"change"},address:{required:!0,message:"请选择地址",trigger:"change"}},CodeToText:q["CodeToText"],regionData:q["regionData"],recordForm:{healthQRCode:"",tripQRCode:"",address:""}}},created:{function:function(){""===this.$store.state.id&&(Object(p["a"])({message:"请先登录账户",type:"error"}),this.$router.push({path:"/"}))}},methods:{changeCasc:function(){console.log(this.recordForm.address)},submit:function(e){var t=this;if(""===this.$store.state.id)return Object(p["a"])({message:"请先登录账户",type:"error"}),void this.$router.push({path:"/"});this.$refs[e].validate((function(e){if(e){var r=t.recordForm.address,o=q["CodeToText"][r[0]]+q["CodeToText"][r[1]]+q["CodeToText"][r[2]],a="http://localhost:8080/record/add/"+t.$store.state.id+"&"+t.recordForm.healthQRCode+"&"+t.recordForm.tripQRCode+"&"+o,n=t;u.a.post(a).then((function(e){!0===e.data?(Object(p["a"])({message:"今日填报完成～",type:"success"}),n.$router.push({path:"/show_record"})):(Object(p["a"])({message:"填报失败, 今日已填报过",type:"error"}),n.$router.push({path:"/show_record"}))})).catch((function(e){Object(p["a"])({message:e,type:"error"})}))}}))}}},P=Q,V=Object(g["a"])(P,T,R,!1,null,null,null),D=V.exports,E=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticStyle:{"max-width":"55%","min-width":"200px",margin:"0 auto","text-align":"center"}},[r("el-page-header",{attrs:{content:"信息管理"},on:{back:e.goback}}),r("h2",[e._v("欢迎你，"+e._s(e.$store.state.username)+"老师")]),r("el-radio-group",{staticStyle:{"margin-bottom":"30px"},on:{change:e.radioClick},model:{value:e.radioValue,callback:function(t){e.radioValue=t},expression:"radioValue"}},[r("el-radio-button",{attrs:{label:"学生管理"}}),r("el-radio-button",{attrs:{label:"健康填报管理"}})],1),e.isRouterAlive?r("router-view"):e._e()],1)},M=[],A={provide:function(){return{reload:this.reload}},data:function(){return{radioValue:"学生管理",isRouterAlive:!0}},created:function(){""===this.$store.state.id?(Object(p["a"])({message:"请先登录账户",type:"error"}),this.$router.push({path:"/"})):"学生管理"===this.radioValue&&this.$router.push({path:"/teacher_index/student_manage"})},methods:{radioClick:function(e){"学生管理"===e?this.$router.push({path:"/teacher_index/student_manage"}):"健康填报管理"===e&&this.$router.push({path:"/teacher_index/record_manage"})},goback:function(){this.$router.push({path:"/"}),this.$store.state.username="",this.$store.state.id=""},reload:function(){this.isRouterAlive=!1,this.$nextTick((function(){this.isRouterAlive=!0}))}}},I=A,N=Object(g["a"])(I,E,M,!1,null,null,null),U=N.exports,J=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[r("el-table",{attrs:{data:e.studentForm,"header-cell-style":{background:"#eef1f6",color:"#606266"},height:"400px",border:""}},[r("el-table-column",{attrs:{prop:"sno",label:"学号"}}),r("el-table-column",{attrs:{prop:"sname",label:"姓名"}}),r("el-table-column",{attrs:{prop:"password",label:"密码"}}),r("el-table-column",{attrs:{prop:"lastfillingtime",label:"上次填报时间"}})],1),r("el-button",{staticStyle:{"margin-top":"20px"},attrs:{icon:"el-icon-circle-plus"},on:{click:function(t){e.dialogFormVisible=!0}}},[e._v(" 添加学生 ")]),r("el-dialog",{attrs:{title:"添加学生信息",visible:e.dialogFormVisible},on:{"update:visible":function(t){e.dialogFormVisible=t}}},[r("el-form",{ref:"dialogForm",attrs:{model:e.dialogForm,rules:e.rules}},[r("el-form-item",{attrs:{label:"学号",prop:"sno"}},[r("el-input",{attrs:{placeholder:"请输入学生学号"},model:{value:e.dialogForm.sno,callback:function(t){e.$set(e.dialogForm,"sno",t)},expression:"dialogForm.sno"}})],1),r("el-form-item",{attrs:{label:"学生姓名",prop:"sname"}},[r("el-input",{attrs:{placeholder:"请输入学生姓名"},model:{value:e.dialogForm.sname,callback:function(t){e.$set(e.dialogForm,"sname",t)},expression:"dialogForm.sname"}})],1)],1),r("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[r("el-button",{on:{click:function(t){e.dialogFormVisible=!1}}},[e._v("取 消")]),r("el-button",{attrs:{type:"primary",loading:e.isloading},on:{click:function(t){return e.addStudent("dialogForm")}}},[e._v("确 定")])],1)],1)],1)},L=[],Y={inject:["reload"],data:function(){return{cno:"",dialogFormVisible:!1,studentForm:[],dialogForm:{sno:"",sname:""},rules:{sno:[{required:!0,message:"请输入学生学号",trigger:"blur"},{validator:this.checkInput,trigger:"blur"}],sname:{required:!0,message:"请输入学生姓名",trigger:"blur"}},isloading:!1}},created:function(){var e=this;u.a.get("http://localhost:8080/teacher/get_cno/"+this.$store.state.id).then((function(t){e.cno=t.data,u.a.get("http://localhost:8080/student/show_by_cno/"+e.cno).then((function(t){e.studentForm=t.data}))}))},methods:{checkInput:function(e,t,r){var o=/[0-9]{10}/;o.test(t)?r():r(new Error("学号必须是十位数"))},addStudent:function(e){var t=this;this.$refs[e].validate((function(e){if(e){var r=t;r.isloading=!0,u.a.post("http://localhost:8080/student/add/"+t.dialogForm.sno+"&"+t.dialogForm.sname+"&"+t.cno).then((function(e){!0===e.data?Object(p["a"])({message:"添加成功",type:"success"}):Object(p["a"])({message:"添加失败",type:"error"})})),r.isloading=!1,r.dialogFormVisible=!1,r.reload()}}))}}},z=Y,B=Object(g["a"])(z,J,L,!1,null,null,null),G=B.exports,H=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[r("el-date-picker",{staticStyle:{"margin-bottom":"30px","margin-right":"10px"},attrs:{type:"date","value-format":"yyyy-MM-dd",format:"yyyy-MM-dd"},model:{value:e.date,callback:function(t){e.date=t},expression:"date"}}),r("el-button",{attrs:{type:"primary"},on:{click:e.dateFilter}},[e._v("筛选")]),r("el-table",{attrs:{data:e.recordForm,"header-cell-style":{background:"#eef1f6",color:"#606266"},height:"400px","row-class-name":e.tableRowClassName,border:""}},[r("el-table-column",{attrs:{prop:"id",label:"编号",width:"50px"}}),r("el-table-column",{attrs:{prop:"sno",label:"学号"}}),r("el-table-column",{attrs:{prop:"healthqrcode",label:"健康码状态"}}),r("el-table-column",{attrs:{prop:"tripqrcode",label:"行程码状态"}}),r("el-table-column",{attrs:{prop:"address",label:"地址",width:"250px"}}),r("el-table-column",{attrs:{prop:"date",label:"填报日期",width:"250px"}})],1)],1)},K=[],W={inject:["reload"],data:function(){return{recordForm:[],cno:"",date:""}},created:function(){this.date=(new Date).getFullYear()+"-"+((new Date).getMonth()+1)+"-"+(new Date).getDate();var e=this;u.a.get("http://localhost:8080/teacher/get_cno/"+this.$store.state.id).then((function(t){e.cno=t.data,u.a.get("http://localhost:8080/record/show_class_record/"+e.cno).then((function(t){e.recordForm=t.data}))}))},methods:{tableRowClassName:function(e){var t=e.row,r=e.rowIndex;return r.title,"红色"===t.healthqrcode||"红色"===t.tripqrcode?"error-row":"黄色"===t.healthqrcode||"黄色"===t.tripqrcode?"warning-row":""},dateFilter:function(){var e=this;u.a.get("http://localhost:8080/record/show_date_record/"+this.date).then((function(t){e.recordForm=t.data}))}}},X=W,Z=(r("6255"),Object(g["a"])(X,H,K,!1,null,null,null)),ee=Z.exports;o["default"].use(l["a"]);var te=[{path:"/",name:"login",component:b},{path:"/login",name:"login",component:b},{path:"/change_pwd",name:"change pwd",component:x},{path:"/show_record",name:"show record",component:C},{path:"/add_record",name:"add record",component:D},{path:"/teacher_index",name:"teacher index",component:U,children:[{path:"student_manage",name:"student manage",component:G},{path:"record_manage",name:"record manage",component:ee}]}],re=new l["a"]({mode:"history",routes:te}),oe=r("cf6b");o["default"].use(oe["a"]);var ae=l["a"].prototype.push;l["a"].prototype.push=function(e){return ae.call(this,e).catch((function(e){return e}))};var ne=new oe["a"].Store({state:{id:"",username:""},mutations:{setId:function(e,t){e.id=t},setUsername:function(e,t){e.username=t}},actions:{setIdAysnc:function(e,t){e.commit("setId",t)},setUserNameAysnc:function(e,t){e.commit("setUsername",t)}}});o["default"].use(s.a),o["default"].config.productionTip=!1,new o["default"]({store:ne,router:re,el:"#app",render:function(e){return e(a["default"])}})},"5b29":function(e,t,r){"use strict";r.d(t,"a",(function(){return o})),r.d(t,"b",(function(){return a}));var o=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{attrs:{id:"app"}},[r("router-view")],1)},a=[]},6255:function(e,t,r){"use strict";r("6646")},6646:function(e,t,r){}});
//# sourceMappingURL=app.5d1766ff.js.map